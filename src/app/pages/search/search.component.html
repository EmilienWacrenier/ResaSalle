<mat-horizontal-stepper class="stepper" [linear]="true" #stepper>

    <!-- Stepper phase 1 selection du jour et heure -->
    <mat-step [stepControl]="dateFormGroup">
        <form [formGroup]="dateFormGroup">
            <ng-template matStepLabel>Date</ng-template>

            <div class="row my-3">
                <div class="col-auto mr-5 p-3">
                    <div class="calendrier">
                        <mat-calendar [selected]="selectedDate" (selectedChange)="onSelect($event)"></mat-calendar>
                    </div>
                </div>
                <div class="col p-3">
                    <div class="container-fluid">

                        <div class="row justify-content-center text-center">
                            <div class="col-6">
                                <h5 class="p-2">Debut</h5>
                                    <mat-form-field class="example-full-width">
                                        <input matInput type="time" step="1800" >
                                    </mat-form-field>
                            </div>
                            <div class="col-6">
                                <h5 class="p-2">Fin</h5>
                                    <mat-form-field class="example-full-width">
                                        <input matInput type="time" step="1800" >
                                    </mat-form-field>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col">
                    <button class="bouton-back-next" mat-button matStepperNext>Suivant</button>
                </div>

                <div class="col">
                    <div>
                        <!-- Toggle de la recurrence -->
                        <mat-slide-toggle (onToggle)="isChecked = !isChecked">
                            Activer la récurrence ?
                        </mat-slide-toggle>
                    </div>
                </div>
                <div class="col">
                    <div>
                        Vous voulez trouver une salle pour une réunion débutant le {{time}} et finissant le
                        {{time2}} le {{selectedDate}}
                    </div>
                </div>
            </div>
        </form>
    </mat-step>

    <!-- Stepper phase 2 recurrence -->
    <mat-step [stepControl]="secondFormGroup" *ngIf="isChecked">
        <ng-template matStepLabel>Récurrence</ng-template>

        <div fxLayout="row" class="my-3">
            <div fxFlex="25%" class="border-right">

                <!-- Groupe radio bouton mensualité -->
                <mat-radio-group [(ngModel)]="selectedRecurrence">
                    <mat-radio-button class="d-block marg" *ngFor="let recurrence of recurrences" [value]="recurrence">
                        {{recurrence}}
                    </mat-radio-button>
                </mat-radio-group>

            </div>

            <div fxFlex="70%" class="mensuelle">
                <!-- if mensuelle -->
                <div *ngIf="selectedRecurrence === 'mensuelle'">

                    <!-- Groupe bouton radio "mensuelle"-->
                    <mat-radio-group [(ngModel)]="selectedMensualite">

                        <!-- Tous les x du mois -->
                        <mat-radio-button class="d-block">
                            Le
                            <input type="number" min="1" max="31" placeholder="1">
                            tous les mois
                        </mat-radio-button>

                        <!-- Tous les "x ème" "jours" du mois -->
                        <mat-radio-button class="d-block">
                            Le
                            <mat-form-field>
                                <mat-select>
                                    <mat-option *ngFor="let numSemaine of numSemaines" [value]="numSemaine">
                                        {{numSemaine}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                            <mat-form-field>
                                <mat-select>
                                    <mat-option *ngFor="let jourSemaine of jourSemaines" [value]="jourSemaine">
                                        {{jourSemaine}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                            de tous les mois
                        </mat-radio-button>

                    </mat-radio-group>

                </div>
            </div>
        </div>


        <div fxLayout="row" class="my-3">
            <!-- Date de fin de la recurrence -->
            <span class="finile">Fini le </span>
            <mat-form-field>
                <input matInput [matDatepicker]="picker">
                <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                <mat-datepicker #picker></mat-datepicker>
            </mat-form-field>
        </div>

        <div fxLayout="row">
            <button class="bouton-back-next" mat-button matStepperPrevious>Retour</button>
            <button class="bouton-back-next" mat-button matStepperNext>Suivant</button>
        </div>


    </mat-step>

    <!-- Stepper phase 1 capacité -->
    <mat-step [stepControl]="thirdFormGroup">
        <ng-template matStepLabel>Salle</ng-template>

        <div class="example-container">
            <h2>Capacité</h2>

            <div cdkDropList #capaciteList="cdkDropList" [cdkDropListData]="capacites"
                [cdkDropListConnectedTo]="[choixList]" class="capacite-list" (cdkDropListDropped)="drop($event)">
                <div class="drag-drop-items" *ngFor="let item of capacites" cdkDrag>{{item}} pers</div>
            </div>
        </div>

        <div class="example-container">
            <h2>Mes critères</h2>

            <div cdkDropList #choixList="cdkDropList" [cdkDropListData]="choix"
                [cdkDropListConnectedTo]="[capaciteList]" class="choix-list" (cdkDropListDropped)="drop($event)">
                <div class="drag-drop-items" *ngFor="let item of choix" cdkDrag>{{item}} pers</div>
            </div>
        </div>

        <div fxLayout="row">
            <button class="bouton-back-next" mat-button matStepperPrevious>Retour</button>
            <button class="bouton-back-next" mat-button matStepperNext>Suivant</button>
        </div>
    </mat-step>

    <!-- Résultats -->
    <mat-step [stepControl]="fourthFormGroup">
        <ng-template matStepLabel>Résultats</ng-template>

    </mat-step>
</mat-horizontal-stepper>